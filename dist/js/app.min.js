"use strict";function Point(e,o,i,s){try{this.name=e,this.lat=ko.observable(o),this.long=ko.observable(i),this.address=s;var t=new google.maps.LatLng(o,i),r=new google.maps.Marker({position:t,map:map,animation:google.maps.Animation.DROP,title:e}),a="http://maps.googleapis.com/maps/api/streetview?size=600x400&location="+this.address+" ";$.ajax({url:a,success:function(){var e='<img src="'+a+' "alt="no picture found">';google.maps.event.addListener(r,"click",function(e,o){return function(){infowindow.setContent(o),infowindow.open(map,e),map.setCenter(e.getPosition())}}(r,e)),markers.push(r)},error:function(e,o,i){alert(""!==i?i:o)}})}catch(n){alert("Unfortunately, the information on this page cannot be loaded"),console.log("Something went wrong: ",n)}}var map,markers=[],infowindowarr=[],infowindow;try{infowindow=new google.maps.InfoWindow}catch(error){alert("Unfortunately, the information on this page cannot be loaded z"),console.log("Something went wrong: ",error)}var initialPlaces=[{name:"Blondies Pizza",x:37.868235,y:-122.259306,address:"2340 Telegraph Ave, Berkeley",pictureDescription:"Blondies Pizza in Berkeley",uiDescription:"My very first pizza place",telephone:"Number: (510) 548-1129",website:"Website: blondiespizza.com",money:"$: $",uiAddress:"Address: 2340 Telegraph Ave, Berkeley",rating:"Rating: 3.6"},{name:"Pieology",x:37.86566,y:-122.258582,address:"2468 Telegraph Ave, Berkeley",pictureDescription:"Pieology Custom Pizza",uiDescription:"Custom pizzas = YUM",telephone:"Number: (510) 649-0600",website:"Website: pieology.com",money:"$: $",uiAddress:"Address: 2468 Telegraph Ave, Berkeley",rating:"Rating: 4.2"},{name:"Thai Basil",x:37.868407,y:-122.258168,address:"2519F Durant Ave, Berkeley",pictureDescription:"Thai Basil Berkeley",uiDescription:"My go to Thai place",telephone:"Number: (510) 548-6692",website:"Website: N/a",money:"$: $",uiAddress:"Address: 2519F Durant Ave, Berkeley",rating:"Rating: 4.2"},{name:"Jupiters",x:37.869841,y:-122.267666,address:"2181 Shattuck Ave,Berkeley",pictureDescription:"Jupiters in Berkeley",uiDescription:"No better place to go with a group of friends",telephone:"Number: (510) 843-8277",website:"Website: jupiterbeer.com",money:"$: $$",uiAddress:"Address: 2181 Shattuck Ave,Berkeley",rating:"Rating: 4.0"},{name:"Chipotle",x:37.868368,y:-122.259009,address:"2311 Telegraph Ave, Berkeley",pictureDescription:"Chipotle Mexican food Berkeley",uiDescription:"A staple for any college kid",telephone:"Number: (510) 548-0340",website:"Website: chipotle.com",money:"$: $",uiAddress:"Address: 2311 Telegraph Ave, Berkeley",rating:"Rating: 3.5"},{name:"Chez Panisse",x:37.88037,y:-122.268869,address:"1517 Shattuck Ave, Berkeley",pictureDescription:"Chez Panisse",uiDescription:"It's famous in Berkeley for a good reason",telephone:"Number: (510) 548-5525",website:"Website: chezpanisse.com",money:"$: $$$",uiAddress:"Address: 1517 Shattuck Ave, Berkeley",rating:"Rating: 4.4"},{name:"Build Pizzeria Roma",x:37.867667,y:-122.268106,address:"2286 Shattuck Ave, Berkeley",pictureDescription:"Build Pizza Berkeley",uiDescription:"So... I really like pizza",telephone:"Number: (510) 898-1839",website:"Website: buildpizzeria.com",money:"$: $$",uiAddress:"Address: 2286 Shattuck Ave, Berkeley",rating:"Rating: 4.4"},{name:"Cheese Board Pizza",x:37.879859,y:-122.26949,address:"1512 Shattuck Ave, Berkeley",pictureDescription:"Cheese Board Pizza Berkeley",uiDescription:"It's a tradition that every freshmen goes here once",telephone:"Number: (510) 549-3055",website:"Website: cheeseboardcollective.com",money:"$: $",uiAddress:"Address: 2340 Telegraph Ave, Berkeley",rating:"Rating: 4.5"},{name:"Phil's Sliders",x:37.871479,y:-122.268545,address:"2024 Shattuck Ave, Berkeley",pictureDescription:"Phil's Sliders Berkeley",uiDescription:"One of the best snacks to get between classes",telephone:"Number: (510) 845-5060",website:"Website: philssliders.com",money:"$: $",uiAddress:"Address: 2024 Shattuck Ave, Berkeley",rating:"Rating: 3.9"},{name:"La Val's",x:37.875486,y:-122.26039,address:"1834 Euclid Ave, Berkeley",pictureDescription:"La Val's Pizza",uiDescription:"Italian food :)",telephone:"Number: (510) 540-9333",website:"Website: lavals.com",money:"$: $",uiAddress:"Address: 1834 Euclid Ave, Berkeley",rating:"Rating: 3.4"}],Place=function(e){this.location=ko.observable(e.location),this.name=ko.observable(e.name),this.shouldShowPlace=ko.observable(!0),this.address=ko.observable(e.address),this.pictureDescription=ko.observable(e.pictureDescription),this.shouldShowDescription=ko.observable(!0),this.shouldShowPlacePicture=ko.observable(!0),this.shouldShowUIAddress=ko.observable(!0),this.uiDescription=ko.observable(e.uiDescription),this.x=ko.observable(e.x),this.y=ko.observable(e.y),this.picUrl=ko.observable("http://maps.googleapis.com/maps/api/streetview?size=600x400&location="+e.address),this.telephone=ko.observable(e.telephone),this.website=ko.observable(e.website),this.money=ko.observable(e.money),this.uiAddress=ko.observable(e.uiAddress),this.rating=ko.observable(e.rating),this.telephoneAndMoney=ko.computed(function(){return this.telephone()+" "+this.money()},this),this.websiteAndRating=ko.computed(function(){return this.website()+" "+this.rating()},this),this.shouldShowTelephoneAndMoney=ko.observable(!0),this.shouldShowWebsiteAndRating=ko.observable(!0)},ViewModel=function(){var e=this,o=0;e.filterWords=ko.observable(),e.placesList=ko.observableArray();var i=new ko.observableArray;initialPlaces.forEach(function(o){e.placesList.push(new Place(o)),i.push(new Point(o.name,o.x,o.y,o.address))}),e.filterList=function(){var i=e.placesList().length;if(void 0!==e.filterWords())for(o=0;i>o;o++)e.placesList()[o].name().toLowerCase().search(e.filterWords().toLowerCase())>-1||(e.placesList()[o].shouldShowPlace(!1),e.placesList()[o].shouldShowDescription(!1),e.placesList()[o].shouldShowPlacePicture(!1),e.placesList()[o].shouldShowUIAddress(!1),e.placesList()[o].shouldShowTelephoneAndMoney(!1),e.placesList()[o].shouldShowWebsiteAndRating(!1),markers[o].setMap(null));$(".searchform").click(function(){"none"!=$(".navbar-toggle").css("display")&&$(".navbar-toggle").trigger("click")})},e.clearFilter=function(){for(o=0;o<e.placesList().length;o++)e.placesList()[o].shouldShowPlace(!0),e.placesList()[o].shouldShowDescription(!0),e.placesList()[o].shouldShowPlacePicture(!0),e.placesList()[o].shouldShowUIAddress(!0),e.placesList()[o].shouldShowTelephoneAndMoney(!0),e.placesList()[o].shouldShowWebsiteAndRating(!0);for(e.filterWords(""),o=0;o<markers.length;o++)markers[o].setMap(map);infowindow.close(),$(".clear").click(function(){"none"!=$(".navbar-toggle").css("display")&&$(".navbar-toggle").trigger("click")})},e.clearPics=function(){var o=$("#flickr-picture-row1"),i=$("#flickr-picture-row2");o.empty(),i.empty(),e.showMap(),$(".clear").click(function(){"none"!=$(".navbar-toggle").css("display")&&$(".navbar-toggle").trigger("click")})},e.displayFlickr=function(e){var i=$("#flickr-picture-row1"),s=$("#flickr-picture-row2");i.empty(),s.empty(),$.ajax({url:"https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=31953374b94d3469c7570fec2c3acc67&text="+e.pictureDescription()+"&format=json&nojsoncallback=1",success:function(e){var t,r,a,n;for(o=0;2>o;o++)t=e.photos.photo[o].id,r=e.photos.photo[o].farm,a=e.photos.photo[o].server,n=e.photos.photo[o].secret,i.append('<img class = "flickr-img" src="https://farm'+r+".staticflickr.com/"+a+"/"+t+"_"+n+'.jpg"/ alt= "flickrimg">');for(o=2;4>o;o++)t=e.photos.photo[o].id,r=e.photos.photo[o].farm,a=e.photos.photo[o].server,n=e.photos.photo[o].secret,s.append('<img class = "flickr-img" src="https://farm'+r+".staticflickr.com/"+a+"/"+t+"_"+n+'.jpg"/ alt= "flickrimg">')},error:function(e,o,t){i.append("<p>An error has occurred</p>"),s.append("<p>An error has occurred</p>"),alert(""!==t?t:o)}})},e.displayBoth=function(o){e.clearMap(),e.displayFlickr(o)},e.clearMap=function(){$(".map-canvas").hide()},e.showMap=function(){$(".map-canvas").show()},e.mapCenter=function(e){var o=new google.maps.LatLng(37.871865,-122.258628);e.panTo(o),$(".center-map").click(function(){"none"!=$(".navbar-toggle").css("display")&&$(".navbar-toggle").trigger("click")})},e.moveCenter=function(){e.mapCenter(map)}};try{map=new google.maps.Map(document.getElementsByClassName("map-canvas")[0],{center:new google.maps.LatLng(37.871865,-122.258628),zoom:14,mapTypeId:google.maps.MapTypeId.ROADMAP})}catch(error){alert("Unfortunately, the information on this page cannot be loaded z"),console.log("Something went wrong: ",error)}ko.applyBindings(new ViewModel);