"use strict";function Point(e,s,o,i){try{this.name=e,this.lat=ko.observable(s),this["long"]=ko.observable(o),this.address=i;var t=new google.maps.LatLng(s,o),r=new google.maps.Marker({position:t,map:map,animation:google.maps.Animation.DROP,title:e});$.ajax({url:"http://maps.googleapis.com/maps/api/streetview?size=600x400&location="+i+" ",success:function(){var e="http://maps.googleapis.com/maps/api/streetview?size=600x400&location="+i+" ",s='<img src="'+e+' "alt="no picture found">',o=new google.maps.InfoWindow({content:s});google.maps.event.addListener(r,"click",function(e,s){return function(){s.open(map,e)}}(r,o)),markers.push(r),infowindowarr.push(o)},error:function(e,s,o){alert(""!==o?o:s)}})}catch(a){alert("Unfortunately, the information on this page cannot be loaded"),console.log("Something went wrong: ",a)}}var map,markers=[],infowindowarr=[],initialPlaces=[{name:"Blondies Pizza",x:37.868235,y:-122.259306,address:"2340 Telegraph Ave, Berkeley",pictureDescription:"Blondies Pizza in Berkeley",uiDescription:"My very first pizza place",telephone:"Number: (510) 548-1129",website:"Website: blondiespizza.com",money:"$: $",uiAddress:"Address: 2340 Telegraph Ave, Berkeley",rating:"Rating: 3.6"},{name:"Pieology",x:37.86566,y:-122.258582,address:"2468 Telegraph Ave, Berkeley",pictureDescription:"Pieology Custom Pizza",uiDescription:"Custom pizzas = YUM",telephone:"Number: (510) 649-0600",website:"Website: pieology.com",money:"$: $",uiAddress:"Address: 2468 Telegraph Ave, Berkeley",rating:"Rating: 4.2"},{name:"Thai Basil",x:37.868407,y:-122.258168,address:"2519F Durant Ave, Berkeley",pictureDescription:"Thai Basil Berkeley",uiDescription:"My go to Thai place",telephone:"Number: (510) 548-6692",website:"Website: N/a",money:"$: $",uiAddress:"Address: 2519F Durant Ave, Berkeley",rating:"Rating: 4.2"},{name:"Jupiters",x:37.869841,y:-122.267666,address:"2181 Shattuck Ave,Berkeley",pictureDescription:"Jupiters in Berkeley",uiDescription:"No better place to go with a group of friends",telephone:"Number: (510) 843-8277",website:"Website: jupiterbeer.com",money:"$: $$",uiAddress:"Address: 2181 Shattuck Ave,Berkeley",rating:"Rating: 4.0"},{name:"Chipotle",x:37.868368,y:-122.259009,address:"2311 Telegraph Ave, Berkeley",pictureDescription:"Chipotle Mexican food Berkeley",uiDescription:"A staple for any college kid",telephone:"Number: (510) 548-0340",website:"Website: chipotle.com",money:"$: $",uiAddress:"Address: 2311 Telegraph Ave, Berkeley",rating:"Rating: 3.5"},{name:"Chez Panisse",x:37.88037,y:-122.268869,address:"1517 Shattuck Ave, Berkeley",pictureDescription:"Chez Panisse",uiDescription:"It's famous in Berkeley for a good reason",telephone:"Number: (510) 548-5525",website:"Website: chezpanisse.com",money:"$: $$$",uiAddress:"Address: 1517 Shattuck Ave, Berkeley",rating:"Rating: 4.4"},{name:"Build Pizzeria Roma",x:37.867667,y:-122.268106,address:"2286 Shattuck Ave, Berkeley",pictureDescription:"Build Pizza Berkeley",uiDescription:"So... I really like pizza",telephone:"Number: (510) 898-1839",website:"Website: buildpizzeria.com",money:"$: $$",uiAddress:"Address: 2286 Shattuck Ave, Berkeley",rating:"Rating: 4.4"},{name:"Cheese Board Pizza",x:37.879859,y:-122.26949,address:"1512 Shattuck Ave, Berkeley",pictureDescription:"Cheese Board Pizza Berkeley",uiDescription:"It's a tradition that every freshmen goes here once",telephone:"Number: (510) 549-3055",website:"Website: cheeseboardcollective.com",money:"$: $",uiAddress:"Address: 2340 Telegraph Ave, Berkeley",rating:"Rating: 4.5"},{name:"Phil's Sliders",x:37.871479,y:-122.268545,address:"2024 Shattuck Ave, Berkeley",pictureDescription:"Phil's Sliders Berkeley",uiDescription:"One of the best snacks to get between classes",telephone:"Number: (510) 845-5060",website:"Website: philssliders.com",money:"$: $",uiAddress:"Address: 2024 Shattuck Ave, Berkeley",rating:"Rating: 3.9"},{name:"La Val's",x:37.875486,y:-122.26039,address:"1834 Euclid Ave, Berkeley",pictureDescription:"La Val's Pizza",uiDescription:"Italian food :)",telephone:"Number: (510) 540-9333",website:"Website: lavals.com",money:"$: $",uiAddress:"Address: 1834 Euclid Ave, Berkeley",rating:"Rating: 3.4"}],Place=function(e){this.location=ko.observable(e.location),this.name=ko.observable(e.name),this.shouldShowPlace=ko.observable(!0),this.address=ko.observable(e.address),this.pictureDescription=ko.observable(e.pictureDescription),this.shouldShowDescription=ko.observable(!0),this.shouldShowPlacePicture=ko.observable(!0),this.shouldShowUIAddress=ko.observable(!0),this.uiDescription=ko.observable(e.uiDescription),this.x=ko.observable(e.x),this.y=ko.observable(e.y),this.picUrl=ko.observable("http://maps.googleapis.com/maps/api/streetview?size=600x400&location="+e.address),this.telephone=ko.observable(e.telephone),this.website=ko.observable(e.website),this.money=ko.observable(e.money),this.uiAddress=ko.observable(e.uiAddress),this.rating=ko.observable(e.rating),this.telephoneAndMoney=ko.computed(function(){return this.telephone()+" "+this.money()},this),this.websiteAndRating=ko.computed(function(){return this.website()+" "+this.rating()},this),this.shouldShowTelephoneAndMoney=ko.observable(!0),this.shouldShowWebsiteAndRating=ko.observable(!0)},ViewModel=function(){var e=this,s=0;e.filterWords=ko.observable(),e.placesList=ko.observableArray([]);var o=new ko.observableArray([]);initialPlaces.forEach(function(s){e.placesList.push(new Place(s)),o.push(new Point(s.name,s.x,s.y,s.address))}),e.filterList=function(){if(void 0!==e.filterWords())for(s=0;s<e.placesList().length;s++)e.placesList()[s].name().toLowerCase().search(e.filterWords().toLowerCase())>-1||(e.placesList()[s].shouldShowPlace(!1),e.placesList()[s].shouldShowDescription(!1),e.placesList()[s].shouldShowPlacePicture(!1),e.placesList()[s].shouldShowUIAddress(!1),e.placesList()[s].shouldShowTelephoneAndMoney(!1),e.placesList()[s].shouldShowWebsiteAndRating(!1),markers[s].setMap(null))},e.clearFilter=function(){for(s=0;s<e.placesList().length;s++)e.placesList()[s].shouldShowPlace(!0),e.placesList()[s].shouldShowDescription(!0),e.placesList()[s].shouldShowPlacePicture(!0),e.placesList()[s].shouldShowUIAddress(!0),e.placesList()[s].shouldShowTelephoneAndMoney(!0),e.placesList()[s].shouldShowWebsiteAndRating(!0);for(e.filterWords(""),s=0;s<markers.length;s++)markers[s].setMap(map);var o=$("#flickr-picture-row1"),i=$("#flickr-picture-row2");for(o.empty(),i.empty(),e.showMap(),s=0;s<infowindowarr.length;s++)infowindowarr[s].close()},e.displayFlickr=function(e){var o=$("#flickr-picture-row1"),i=$("#flickr-picture-row2");o.empty(),i.empty(),$.ajax({url:"https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=31953374b94d3469c7570fec2c3acc67&text="+e.pictureDescription()+"&format=json&nojsoncallback=1",success:function(e){var t,r,a,n;for(s=0;2>s;s++)t=e.photos.photo[s].id,r=e.photos.photo[s].farm,a=e.photos.photo[s].server,n=e.photos.photo[s].secret,o.append('<img class = "flickr-img" src="https://farm'+r+".staticflickr.com/"+a+"/"+t+"_"+n+'.jpg"/ alt= "flickrimg">');for(s=2;4>s;s++)t=e.photos.photo[s].id,r=e.photos.photo[s].farm,a=e.photos.photo[s].server,n=e.photos.photo[s].secret,i.append('<img class = "flickr-img" src="https://farm'+r+".staticflickr.com/"+a+"/"+t+"_"+n+'.jpg"/ alt= "flickrimg">')},error:function(e,s,t){o.append("<p>An error has occurred</p>"),i.append("<p>An error has occurred</p>"),alert(""!==t?t:s)}})},e.displayBoth=function(s){e.clearMap(),e.displayFlickr(s)},e.clearMap=function(){$("#map-canvas").hide()},e.showMap=function(){$("#map-canvas").show()},e.mapCenter=function(e){var s=new google.maps.LatLng(37.871865,-122.258628);e.panTo(s)},e.moveCenter=function(){e.mapCenter(map)}};try{map=new google.maps.Map(document.getElementById("map-canvas"),{center:new google.maps.LatLng(37.871865,-122.258628),zoom:14,mapTypeId:google.maps.MapTypeId.ROADMAP})}catch(error){alert("Unfortunately, the information on this page cannot be loaded"),console.log("Something went wrong: ",error)}ko.applyBindings(new ViewModel);